---
title: 美赛小分析文章(36)
date: 2021-02-21 16:05:21
tags: 美赛
categories: 2021年美赛

---



# 美赛模拟赛或正赛中的一个小模块~

---



<!--more-->

为了便于表达下述关系矩阵，设数据中音乐家总数为$\theta$，根据数据集给出的所有音乐家的数量为5603，$\theta$的取值为5603。

我们从已知数据中，摘取得到了不同音乐家之间的关系矩阵$\bf{M}$。
$$
\bf{M} =  \{m_{ij}\},1\le i,j\le\theta
$$
以音乐家的人数$\theta$作为矩阵的行数和列数。如果第$i$位音乐家对于第$j$位音乐家产生了影响，那么矩阵中$\bf M_{ij}$的值为1，否则为0。

由此可知，关系矩阵有$\theta^2$个元素，而其中不为零元素个数，仅占 1.3% 左右，矩阵显然为稀疏矩阵。

通过$ funk\_SVD $方法，我们可以将矩阵 M 分解成矩阵 P 与 Q 相乘，其作用如下：

- 将 $\theta\times\theta$ 的矩阵 M 变为 $\theta\times k$ 与 $k\times\theta$ (k 可任意指定) 两个矩阵 P 和 Q 相乘的近似，大大减少数据量
- 通过分解后的矩阵 P 和 Q，可以提取出 M 的隐藏信息

采用$Funk\_SVD$方法，意味着我们需要将原始的矩阵$M_{\theta\times\theta}$拆分为两个矩阵$P_{\theta\times k}$和矩阵$Q_{k\times\theta}$，括号内相乘的两个数分别表示矩阵的行数和列数，在操作时确定。

分解后，我们考察分解结果是否准确，并且分析分解后的矩阵 P 和 Q 的值意味着什么。

首先，对于原始矩阵中不为0的位置$m_{ij}$，其在分解后对应的向量为$m^{'}_{ij}$，其满足的关系为：
$$
\bf {m^{'}_{ij}} = \sum_{k=1}^{K}p_{ik}q_{kj}
$$
对于整个矩阵而言，总的损失用均方差(SSE)来衡量:
$$
SSE = E^2 = \sum_{i=1}^{\theta}\sum_{j=1}^{\theta}(\bf m_{ij}-m^{'}_{ij})^2
$$
我们最小化上述的$SSE$，能够以最小的扰动完成对于原始评分矩阵的分解。分解过后，我们只需要通过计算$M^{'}$来完成对于原始评分矩阵的填充。为了求解使得$SSE$最小的矩阵$P$与$Q$，我们采用随机梯度下降法，对于上文中的目标函数$SSE$进行求解，最终得到了我们分解后的矩阵$P$和$Q$。

我们对于原始关系矩阵通过$Funk\_SVD$进行了不同的分解，当分解的因素k为1时，得到以下图像：

![image-20210205213322745](https://gitee.com/alexs-rabbit/picture/raw/master/image-20210205213322745.png)

上图为分解后得到矩阵P的每个元素对应音乐家影响系数，我们认为 P 的每个元素在一定程度上反映了音乐家的影响力。

同时，我们也得了另外一个分解矩阵，矩阵$Q$，对于

![image-20210205162209322](https://gitee.com/alexs-rabbit/picture/raw/master/20210205162209.png)

上图为分解后得到矩阵Q的每个元素对应音乐家影响人数，我们认为 Q 的每个元素在一定程度上反映了音乐家容易被影响的倾向。

除了将矩阵拆分为一个因素之外，我们还尝试了将矩阵拆分为三个因素 k=3，得到的$P$和$Q$我们分别进行了归一化处理，并且得到了以下的图像：

![image-20210205155220916](https://gitee.com/alexs-rabbit/picture/raw/master/20210205155220.png)

![image-20210205155229625](https://gitee.com/alexs-rabbit/picture/raw/master/20210205155229.png)

上下两图分别展示了，拆分后的矩阵$P$与$Q$的结果。我们发现，在上下两图中，拆分后得到的三个因素，与只用一个因素进行矩阵拆分后的结果相比，拆分后的三个因素表现出来都是正相关或是负相关的关系。这告诉我们，将原始矩阵以一个因素进行拆分足以表示数据的信息，也告诉我们，将原始矩阵以一个因素拆分并且进行分析是可靠的，可行的。



我们在 k=1 时，对矩阵P进行归一化处理，并使用 Sigmoid 函数进行拟合，达成如下结果：

**这里要加一句，我们认为上述$p$分解矩阵，归一化处理后，得到的纵坐标，即为题目中要求的每个音乐家的音乐影响系数**。

![influence-follower](https://gitee.com/koorye/picgo/raw/master/influence-follower.png)

由此我们认为，音乐家的“音乐影响”系数 $c_i$ 与音乐家的追随者人数 $n_f$ 之间存在如下关系：
$$
c_i=\frac{0.95}{1+e^{-0.15n_f}}
$$

这里使用sigmoid函数拟合的结果也较为合理。和种群自然环境中增长的模型相似，音乐家和follower数量也是符合类似规律的。当音乐家的follower较少时，随着follower的增加，follower的人际关系会为音乐家带来更多的follower，音乐家的影响力会急剧上升。当follower的数量逐渐增加到饱和时，意味着follower的人际圈子里已经大多都成为了follower，这个时候音乐家再想提高影响力，困难就大大增加了。影响力达到了饱和状态。















## 这底下为对于一些点的子图的分析



对于某个音乐家而言，其影响有大有小，为了使得关系更加明晰，我们对于某个音乐家影响其他的音乐家的关系，画出子图进一步分析。为了简化模型，我们认为音乐家对于其直接的follower有影响，对于follower的follower也是有一定的影响力的。对于再远的follower，我们认为本音乐家影响程度有限，不对其产生太大影响，以此来定义子图，子图由音乐家和他的follower和follower的follower构成。

![image-20210205192158356](https://gitee.com/alexs-rabbit/picture/raw/master/image-20210205192158356.png)

​	上图对应的是id为142249的音乐家影响的音乐家，共有17个，音乐影响系数为0.00010488021040323054
![image-20210205193040702](https://gitee.com/alexs-rabbit/picture/raw/master/image-20210205193040702.png)

​	上图为id为208774音乐家影响的音乐家，共有62位，音乐影响系数为0.0005169017701777528


![image-20210205192332251](https://gitee.com/alexs-rabbit/picture/raw/master/image-20210205192332251.png)

​	上图为id为335的音乐家影响的音乐家，共有242位，音乐影响系数为0.00015581641583873427


![image-20210205194554844](https://gitee.com/alexs-rabbit/picture/raw/master/image-20210205194554844.png)

​	上图为id为2411的音乐家影响的音乐家，共有269位，音乐影响系数位0.0004581735161589413



​	以上四幅图，前两幅取自拐点左侧，后两幅取自拐点右侧。且它们的number of followers呈递增趋势。当音乐家对应数据位于拐点之前，随着followers的增加，影响成倍增加（音乐影响系数可以由followers的数量直观体现），前面三幅图可以直观体现。当音乐家对应数据处于拐点之后，随着followers的上升，影响也不再剧烈上升，而是保持相对稳定的趋势。同时，我们也可以从上述的图中得到一个结论。音乐影响系数大的音乐家，其影响力不仅仅体现在广度上，还体现在深度上，理由是：图三和图四中音乐家的follower的follower比图一图二中多了许多，因此我们可以得到这个结论。

















**下面是第一问的修正版本，向姐姐看看里面还有一些内容要修正的，我用粗体都标出来了。**













第一问通过page-rank修正版本：

为了便于表达下述关系矩阵，设数据中音乐家总数为$\theta$，根据数据集给出的所有音乐家的数量为5603，$\theta$的取值为5603。

我们从已知数据中，摘取得到了不同音乐家之间的关系矩阵$\bf{M}$。
$$
\bf{M} =  \{m_{ij}\},1\le i,j\le\theta
$$
以音乐家的人数$\theta$作为矩阵的行数和列数。如果第$i$位音乐家对于第$j$位音乐家产生了影响，那么矩阵中$\bf M_{ij}$的值为1，否则为0。

由此可知，关系矩阵有$\theta^2$个元素，而其中不为零元素个数，仅占 1.3% 左右，矩阵显然为稀疏矩阵。



**下面这里发生了改变哦！！！**



根据上述矩阵，我们构造有向图，以influence关系为有向边，将矩阵转换为有向图。转换为有向图后的效果如下图所示：



![image-20210206092439077](https://gitee.com/alexs-rabbit/picture/raw/master/image-20210206092439077.png)

由于网络较为复杂，此图显示的是id为335的音乐家以及其直接的follower，有向箭头表示影响关系，类似于上图所示网络，我们得到了音乐家之间复杂的关系网络。为了分析题目中的"音乐影响指标" ，我们对于网络中的每一个顶点（也就是对应的艺术家），赋予权重。我们采用$PageRank$方法，这种算法可以有效地根据构造的有向图，求出各个顶点的权值。我们对于音乐家i进行简要分析，简述$PageRank$的原理。



$PageRank$方法的原理如下:

初始阶段，我们为有向图的所有页面设置相同的$PageRank(pr)$值，经过若干轮的迭代计算，每个页面会获得最终的$pr$值，随着每一轮计算的进行，当前的$pr$值都会不断得到更新。

迭代更新权值过程中，我们采用$PageRank$公式来对于每个顶点的权值就行迭代，我们假设顶点i的权重值为$pr(i)$，顶点$j$的PR值$pr(j)$。这里的$j$是指向i的所有顶点中的某个顶点。$c(j)$指的是顶点j$的出度，也就是$$j$指向其他顶点的边的个数。d在这里的含义被定义为阻尼系数，表示的是，一个音乐家影响到某个follower之后，仍然会继续向follower的follower传播影响的概率。
$$
pr(i) = (1-d)+d(\frac{pr(j_1)}{c(j_1)}+\cdots+\frac{pr(j_n)}{c(j_{n})})
$$
经过多次迭代更新，算法结束之后，我们得到了每个音乐家的权重，并绘制了相应的图像：

![image-20210206093510702](https://gitee.com/alexs-rabbit/picture/raw/master/image-20210206093510702.png)

我们从图中可以发现，绝大多数的音乐家都处于follower较少并且权重较小的状态。少数音乐家，follower很多，影响较大，如图中最右边的孤立点为我们耳熟能详的beatles乐队，十分合理。同时，也有少数音乐家follower虽然少，但是他们直接或间接影响了其他follower特别多并且权重特别高的音乐家，导致这一部分音乐家的权重非常高，这也是符合我们的认识的。经过取样分析，我们认为$PageRank$的权重划分较为合理，效果较好。综合考虑后，我们将$PageRank$的权重定为每个音乐家的音乐影响系数。







## 这底下为对于一些点的子图的分析



对于某个音乐家而言，其影响有大有小，为了使得关系更加明晰，我们对于某个音乐家影响其他的音乐家的关系，画出子图进一步分析。

**这里也修改了的哦**（下面的权重也修改了）

由于子网络全部画出太过复杂，我们仅仅，画出了包含音乐家和他的follower和follower的follower的子图，通过这几幅图的例子进行分析。

![image-20210205192158356](https://gitee.com/alexs-rabbit/picture/raw/master/image-20210205192158356.png)

​	上图对应的是id为142249的音乐家影响的音乐家，共有17个，音乐影响系数为0.00010488021040323054
![image-20210205193040702](https://gitee.com/alexs-rabbit/picture/raw/master/image-20210205193040702.png)

​	上图为id为208774音乐家影响的音乐家，共有61位，音乐影响系数为0.0005169017701777528


![image-20210205194554844](https://gitee.com/alexs-rabbit/picture/raw/master/image-20210205194554844.png)

​	上图为id为2411的音乐家影响的音乐家，共有268位，音乐影响系数位0.0004581735161589413

**下面这里的描述也变了**

​	以上三幅图为其中的一些样本。可以看出，随着音乐影响系数的增大，子网络的复杂度整体呈现上升趋势。音乐影响系数大的音乐家，在网络中的特点，不仅仅体现在广度上，还体现在深度上。随着影响系数的增大，follower增多，follower影响的follower也在增多，从侧面印证我们的拟合结果。除了少数特别情况外，绝大多数的音乐家的影响力和他的followers呈现出了正相关关系，这一点从我们的$PageRank$分析图中也可以直观看出。

